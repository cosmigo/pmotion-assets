<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Jerry Morrison, Electronic Arts">
<title>&#8220;EA IFF 85&#8221; Standard for Interchange Format Files</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./css/styles.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>&#8220;EA IFF 85&#8221; Standard for Interchange Format Files</h1>
<div class="details">
<span id="author" class="author">Jerry Morrison, Electronic Arts</span><br>
<span id="revdate">January 14, 1985</span>
<br><span id="revremark">Released and in use</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#part_1">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_standards_are_good_for_software_developers">Standards are Good for Software Developers</a></li>
<li><a href="#_standards_are_good_for_software_users">Standards are Good for Software Users</a></li>
<li><a href="#_here_is_ea_iff_1985">Here is &#8220;EA IFF 1985&#8221;</a></li>
<li><a href="#_references">References</a></li>
</ul>
</li>
<li><a href="#part_2">2. Background for Designers</a>
<ul class="sectlevel2">
<li><a href="#_what_do_we_need">What Do We Need?</a></li>
<li><a href="#_think_ahead">Think Ahead</a></li>
<li><a href="#_scope">Scope</a></li>
<li><a href="#_data_abstraction">Data Abstraction</a></li>
<li><a href="#_previous_work">Previous Work</a></li>
</ul>
</li>
<li><a href="#part_3">3. Primitive Data Types</a>
<ul class="sectlevel2">
<li><a href="#_alignment">Alignment</a></li>
<li><a href="#_numbers">Numbers</a></li>
<li><a href="#_characters">Characters</a></li>
<li><a href="#_dates">Dates</a></li>
<li><a href="#_type_ids">Type IDs</a></li>
<li><a href="#_chunks">Chunks</a></li>
<li><a href="#_strings_string_chunks_and_string_properties">Strings, String Chunks, and String Properties</a></li>
<li><a href="#_data_properties">Data Properties</a></li>
<li><a href="#_links">Links</a></li>
<li><a href="#_file_references">File References</a></li>
</ul>
</li>
<li><a href="#part_4">4. Data Sections</a>
<ul class="sectlevel2">
<li><a href="#_group_form">Group FORM</a></li>
<li><a href="#_composite_forms">Composite FORMs</a>
<ul class="sectlevel3">
<li><a href="#_ftxt">FTXT</a></li>
<li><a href="#_ilbm">ILBM</a></li>
<li><a href="#_pics">PICS</a></li>
</ul>
</li>
<li><a href="#_other_macintosh_resource_types">Other Macintosh Resource Types</a></li>
<li><a href="#_designing_new_data_sections">Designing New Data Sections</a></li>
</ul>
</li>
<li><a href="#part_5">5. LISTs, CATs, and Shared Properties</a>
<ul class="sectlevel2">
<li><a href="#_group_cat">Group CAT</a></li>
<li><a href="#_group_list">Group LIST</a></li>
<li><a href="#_group_prop">Group PROP</a></li>
<li><a href="#_properties_for_list">Properties for LIST</a></li>
</ul>
</li>
<li><a href="#part_6">6. Standard File Structure</a>
<ul class="sectlevel2">
<li><a href="#_file_structure_overview">File Structure Overview</a></li>
<li><a href="#_single_purpose_files">Single Purpose Files</a></li>
<li><a href="#_scrap_files">Scrap Files</a></li>
<li><a href="#_rules_for_reader_programs">Rules for Reader Programs</a></li>
<li><a href="#_rules_for_writer_programs">Rules for Writer Programs</a></li>
</ul>
</li>
<li><a href="#appendix_a">Appendix A: Reference</a>
<ul class="sectlevel2">
<li><a href="#_type_definitions">Type Definitions</a></li>
<li><a href="#_syntax_definitions">Syntax Definitions</a></li>
<li><a href="#_defined_chunk_ids">Defined Chunk IDs</a></li>
<li><a href="#_support_software">Support Software</a></li>
<li><a href="#_example_diagrams">Example Diagrams</a></li>
</ul>
</li>
<li><a href="#appendix_b">Appendix B: Standards Committee</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="part_1"><a class="anchor" href="#part_1"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_standards_are_good_for_software_developers"><a class="anchor" href="#_standards_are_good_for_software_developers"></a>Standards are Good for Software Developers</h3>
<div class="paragraph">
<p>As home computer hardware evolves to better and better media machines, the demand increases for higher quality, more detailed data.
Data development gets more expensive, requires more expertise and better tools, and has to be shared across projects.
Think about several ports of a product on one CD-ROM with 500M Bytes of common data!</p>
</div>
<div class="paragraph">
<p>Development tools need standard interchange file formats.
Imagine scanning in images of &#8220;player&#8221; shapes, moving them to a paint program for editing, then incorporating them into a game.
Or writing a theme song with a Macintosh score editor and incorporating it into an Amiga game.
The data must at times be transformed, clipped, filled out, and moved across machine kinds.
Media projects will depend on data transfer from graphic, music, sound effect, animation, and script tools.</p>
</div>
</div>
<div class="sect2">
<h3 id="_standards_are_good_for_software_users"><a class="anchor" href="#_standards_are_good_for_software_users"></a>Standards are Good for Software Users</h3>
<div class="paragraph">
<p>Customers should be able to move their own data between independently developed software products.
And they should be able to buy data libraries usable across many such products.
The types of data objects to exchange are open-ended and include plain and formatted text, raster and structured graphics, fonts, music, sound effects, musical instrument descriptions, and animation.</p>
</div>
<div class="paragraph">
<p>The problem with expedient file formats&#8201;&#8212;&#8201;typically memory dumps&#8201;&#8212;&#8201;is that they&#8217;re too provincial.
By designing data for one particular use (e.g. a screen snapshot), they preclude future expansion (would you like a full page picture? a multi-page document?).
In neglecting the possibility that other programs might read their data, they fail to save contextual information (how many bit planes? what resolution?).
Ignoring that other programs might create such files, they&#8217;re intolerant of extra data (texture palette for a picture editor), missing data (no color map), or minor variations (smaller image).
In practice, a filed representation should rarely mirror an in-memory representation.
The former should be designed for longevity; the latter to optimize the manipulations of a particular program.
The same filed data will be read into different memory formats by different programs.</p>
</div>
<div class="paragraph">
<p>The IFF philosophy: &#8220;A little behind-the-scenes conversion when programs read and write files is far better than NxM explicit conversion utilities for highly specialized formats.&#8221;</p>
</div>
<div class="paragraph">
<p>So we need some standardization for data interchange among development tools and products.
The more developers that adopt a standard, the better for all of us and our customers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_here_is_ea_iff_1985"><a class="anchor" href="#_here_is_ea_iff_1985"></a>Here is &#8220;EA IFF 1985&#8221;</h3>
<div class="paragraph">
<p>Here is our offering: Electronic Arts&#8217; IFF standard for Interchange File Format.
The full name is &#8220;EA IFF 1985&#8221;.
Alternatives and justifications are included for certain choices.
Public domain subroutine packages and utility programs are available to make it easy to write and use IFF-compatible programs.</p>
</div>
<div class="paragraph">
<p><a href="#part_1">Part 1</a> introduces the standard.
<a href="#part_2">Part 2</a> presents its requirements and background.
<a href="#part_3">Parts 3</a>, <a href="#part_4">4</a>, and <a href="#part_5">5</a> define the primitive data types, FORMs, and LISTs, respectively, and how to define new high level types.
<a href="#part_6">Part 6</a> specifies the top level file structure.
<a href="#appendix_a">Appendix A</a> is included for quick reference and <a href="#appendix_b">Appendix B</a> names the committee responsible for this standard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_references"><a class="anchor" href="#_references"></a>References</h3>
<div class="ulist">
<ul>
<li>
<p>Amiga&#8482; is a trademark of Commodore-Amiga, Inc.</p>
</li>
<li>
<p><em>American National Standard Additional Control Codes for Use with ASCII</em>, ANSI standard 3.64-1979 for an 8-bit character set.
See also <a href="https://en.wikipedia.org/wiki/ISO/IEC_2022" target="_blank" rel="noopener">ISO standard 2022</a> and ISO/DIS standard 6429.2.</p>
</li>
</ul>
</div>
<div id="c-ref-man" class="ulist">
<ul>
<li>
<p><a href="https://www.pearson.com/us/higher-education/program/Harbison-C-A-Reference-Manual-5th-Edition/PGM220244.html" target="_blank" rel="noopener"><em>C, A Reference Manual</em></a>, Samuel P. Harbison and Guy L. Steele Jr., Tartan
Laboratories.
Prentice-Hall, Englewood Cliffs, NJ, 1984.</p>
</li>
</ul>
</div>
<div id="compiler-construction" class="ulist">
<ul>
<li>
<p><a href="https://www.springer.com/gp/book/9783540372639" target="_blank" rel="noopener"><em>Compiler Construction, An Advanced Course</em></a>, edited by F. L. Bauer and J. Eickel (Springer-Verlag, 1976).
This book is one of many sources for information on recursive descent parsing.</p>
</li>
</ul>
</div>
<div id="dif-tech-spec" class="ulist">
<ul>
<li>
<p><em>DIF Technical Specification</em> &#169; 1981 by Software Arts, Inc.
DIF&#8482; is the format for spreadsheet data interchange developed by Software Arts, Inc.
DIF&#8482; is a trademark of Software Arts, Inc.</p>
</li>
<li>
<p>Electronic Arts&#8482; is a trademark of Electronic Arts.</p>
</li>
</ul>
</div>
<div id="ftxt" class="ulist">
<ul>
<li>
<p><a href="https://wiki.amigaos.net/wiki/FTXT_IFF_Formatted_Text" title="Read document on AmigaOS Wiki" target="_blank" rel="noopener">&#8220;FTXT&#8221; IFF Formatted Text</a>, from Electronic Arts. IFF supplement document
for a text format.</p>
</li>
</ul>
</div>
<div id="inside_macintosh" class="ulist">
<ul>
<li>
<p><em>Inside Macintosh</em> &#169; 1982, 1983, 1984, 1985 Apple Computer, Inc., a programmer&#8217;s reference manual.
Apple&#174; is a trademark of Apple Computer, Inc.
Macintosh&#8482; is a trademark licensed to Apple Computer, Inc.</p>
</li>
<li>
<p>&#8220;ILBM&#8221; IFF Interleaved Bitmap, from Electronic Arts. IFF supplement
document for a raster image format.</p>
</li>
</ul>
</div>
<div id="m68000_man" class="ulist">
<ul>
<li>
<p><em>M68000 16/32-Bit Microprocessor Programmer&#8217;s Reference Manual</em> &#169; 1984, 1982, 1980, 1979 by Motorola, Inc.</p>
</li>
</ul>
</div>
<div id="postscript_lang_man" class="ulist">
<ul>
<li>
<p><em>PostScript Language Manual</em> &#169; 1984 Adobe Systems Incorporated.
PostScript&#8482; is a trademark of Adobe Systems, Inc.
Times and Helvetica&#174; are trademarks of Allied Corporation.</p>
</li>
<li>
<p><em>InterScript: A Proposal for a Standard for the Interchange of Editable
Documents</em> &#169; 1984 Xerox Corporation.</p>
</li>
</ul>
</div>
<div id="intro-interscript" class="ulist">
<ul>
<li>
<p><em>Introduction to InterScript</em> &#169; 1985 Xerox Corporation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part_2"><a class="anchor" href="#part_2"></a>2. Background for Designers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part 2 is about the background, requirements, and goals for the standard.
It&#8217;s geared for people who want to design new types of IFF objects.
People just interested in using the standard may wish to skip this part.</p>
</div>
<div class="sect2">
<h3 id="_what_do_we_need"><a class="anchor" href="#_what_do_we_need"></a>What Do We Need?</h3>
<div class="paragraph">
<p>A standard should be long on prescription and short on overhead.
It should give lots of rules for designing programs and data files for synergy.
But neither the programs nor the files should cost too much more than the expedient variety.
While we&#8217;re looking to a future with CD-ROMs and perpendicular recording, the standard must work well on floppy disks.</p>
</div>
<div class="paragraph">
<p>For program portability, simplicity, and efficiency, formats should be designed with more than one implementation style in mind. (In practice, pure stream I/O is adequate although random access makes it easier to write files.) It ought to be possible to read one of many objects in a file without scanning all the preceding data.
Some programs need to read and play out their data in real time, so we need good compromises between generality and efficiency.</p>
</div>
<div class="paragraph">
<p>As much as we need standards, they can&#8217;t hold up product schedules.
So we also need a kind of decentralized extensibility where any software developer can define and refine new object types without some &#8220;standards authority&#8221; in the loop.
Developers must be able to extend existing formats in a forward- and backward-compatible way.
A central repository for design information and example programs can help us take full advantage of the standard.</p>
</div>
<div class="paragraph">
<p>For convenience, data formats should heed the restrictions of various processors and environments.
E.g. word-alignment greatly helps 68000 access at insignificant cost to 8088 programs.</p>
</div>
<div class="paragraph">
<p>Other goals include the ability to share common elements over a list of objects and the ability to construct composite objects containing other data objects with structural information like directories.</p>
</div>
<div class="paragraph">
<p>And finally,</p>
</div>
<div class="quoteblock">
<blockquote>
Simple things should be simple and complex things should be possible.
</blockquote>
<div class="attribution">
&#8212; Alan Kay.
</div>
</div>
</div>
<div class="sect2">
<h3 id="_think_ahead"><a class="anchor" href="#_think_ahead"></a>Think Ahead</h3>
<div class="paragraph">
<p>Let&#8217;s think ahead and build programs that read and write files for each other and for programs yet to be designed.
Build data formats to last for future computers so long as the overhead is acceptable.
This extends the usefulness and life of today&#8217;s programs and data.</p>
</div>
<div class="paragraph">
<p>To maximize interconnectivity, the standard file structure and the specific object formats must all be general and extensible.
Think ahead when designing an object.
It should serve many purposes and allow many programs to store and read back all the information they need; even squeeze in custom data.
Then a programmer can store the available data and is encouraged to include fixed contextual details.
Recipient programs can read the needed parts, skip unrecognized stuff, default missing data, and use the stored context to help transform the data as needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scope"><a class="anchor" href="#_scope"></a>Scope</h3>
<div class="paragraph">
<p>IFF addresses these needs by defining a standard file structure, some initial data object types, ways to define new types, and rules for accessing these files.
We can accomplish a great deal by writing programs according to this standard, but don&#8217;t expect direct compatibility with existing software.
We&#8217;ll need conversion programs to bridge the gap from the old world.</p>
</div>
<div class="paragraph">
<p>IFF is geared for computers that readily process information in 8-bit bytes.
It assumes a &#8220;physical layer&#8221; of data storage and transmission that reliably maintains &#8220;files&#8221; as strings of 8-bit bytes.
The standard treats a &#8220;file&#8221; as a container of data bytes and is independent of how to find a file and whether it has a byte count.</p>
</div>
<div class="paragraph">
<p>This standard does not by itself implement a clipboard for cutting and pasting data between programs.
A clipboard needs software to mediate access, to maintain a &#8220;contents version number&#8221; so programs can detect updates, and to manage the data in &#8220;virtual memory&#8221;.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_abstraction"><a class="anchor" href="#_data_abstraction"></a>Data Abstraction</h3>
<div class="paragraph">
<p>The basic problem is how to represent information  in a way that&#8217;s program-independent, compiler-independent, machine-independent, and device-independent.</p>
</div>
<div class="paragraph">
<p>The computer science approach is &#8220;data abstraction&#8221;, also known as &#8220;objects&#8221;, &#8220;actors&#8221;, and &#8220;abstract data types&#8221;.
A data abstraction has a &#8220;concrete representation&#8221; (its storage format), an &#8220;abstract representation&#8221; (its capabilities and uses), and access procedures that isolate all the calling software from the concrete representation.
Only the access procedures touch the data storage.
Hiding mutable details behind an interface is called &#8220;information hiding&#8221;.
What data abstraction does is abstract from details of implementing the object, namely the selected storage representation and algorithms for manipulating it.</p>
</div>
<div class="paragraph">
<p>The power of this approach is modularity.
By adjusting the access procedures we can extend and restructure the data without impacting the interface or its callers.
Conversely, we can extend and restructure the interface and callers without making existing data obsolete.
It&#8217;s great for interchange!</p>
</div>
<div class="paragraph">
<p>But we seem to need the opposite: fixed file formats for all programs to access.
Actually, we could file data abstractions (&#8220;filed objects&#8221;) by storing the data and access procedures together.
We&#8217;d have to encode the access procedures in a standard machine-independent programming language Ã  la PostScript.
Even still, the interface can&#8217;t evolve freely since we can&#8217;t update all copies of the access procedures.
So we&#8217;ll have to design our abstract representations for limited evolution and occasional revolution (conversion).</p>
</div>
<div class="paragraph">
<p>In any case, today&#8217;s microcomputers can&#8217;t practically store data abstractions.
They can do the next best thing: store arbitrary types of data in &#8220;data chunks&#8221;, each with a type identifier and a length count.
The type identifier is a reference by name to the access procedures (any local implementation).
The length count enables storage-level object operations like &#8220;copy&#8221; and &#8220;skip to next&#8221; independent of object type.</p>
</div>
<div class="paragraph">
<p>Chunk writing is straightforward.
Chunk reading requires a trivial parser to scan each chunk and dispatch to the proper access/conversion procedure.
Reading chunks nested inside other chunks requires recursion, but no lookahead or backup.</p>
</div>
<div class="paragraph">
<p>That&#8217;s the main idea of IFF.
There are, of course, a few other details&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_previous_work"><a class="anchor" href="#_previous_work"></a>Previous Work</h3>
<div class="paragraph">
<p>Where our needs are similar, we borrow from existing standards.</p>
</div>
<div class="paragraph">
<p>Our basic need to move data between independently developed programs is similar to that addressed by the Apple Macintosh desk scrap or &#8220;clipboard&#8221; [<a href="#inside_macintosh"><em>Inside Macintosh</em></a> chapter &#8220;Scrap Manager&#8221;].
The Scrap Manager works closely with the Resource Manager, a handy filer and swapper for data objects (text strings, dialog window templates, pictures, fonts) including types yet to be designed [<a href="#inside_macintosh"><em>Inside Macintosh</em></a> chapter &#8220;Resource Manager&#8221;].
The Resource Manager is akin to Smalltalk&#8217;s object swapper.</p>
</div>
<div class="paragraph">
<p>We will probably write a Macintosh desk accessory that converts IFF files to and from the Macintosh clipboard for quick and easy interchange with programs like MacPaint and Resource Mover.</p>
</div>
<div class="paragraph">
<p>Macintosh uses a simple and elegant scheme of 4-character &#8220;identifiers&#8221; to identify resource types, clipboard format types, file types, and file creator programs.
Alternatives are unique ID numbers assigned by a central authority or by hierarchical authorities, unique ID numbers generated by algorithm, other fixed length character strings, and variable length strings.
Character string identifiers double as readable signposts in data files and programs.
The choice of 4 characters is a good tradeoff between storage space, fetch/compare/store time, and name space size.
We&#8217;ll honor Apple&#8217;s designers by adopting this scheme.</p>
</div>
<div class="paragraph">
<p>&#8220;PICT&#8221; is a good example of a standard structured graphics format (including raster images) and its many uses [<a href="#inside_macintosh"><em>Inside Macintosh</em></a> chapter &#8220;QuickDraw&#8221;].
Macintosh provides QuickDraw routines in ROM to create, manipulate, and display PICTs.
Any application can create a PICT by simply asking QuickDraw to record a sequence of drawing commands.
Since it&#8217;s just as easy to ask QuickDraw to render a PICT to a screen or a printer, it&#8217;s very effective to pass them between programs, say from an illustrator to a word processor.
An important feature is the ability to store &#8220;comments&#8221; in a PICT which QuickDraw will ignore.
Actually, it passes them to your optional custom &#8220;comment handler&#8221;.</p>
</div>
<div class="paragraph">
<p>PostScript, Adobe&#8217;s print file standard, is a more general way to represent any print image (which is a specification for putting marks on paper) [<a href="#postscript_lang_man"><em>PostScript Language Manual</em></a>].
In fact, PostScript is a full-fledged programming language.
To interpret a PostScript program is to render a document on a raster output device.
The language is defined in layers: a lexical layer of identifiers, constants, and operators; a layer of reverse polish semantics including scope rules and a way to define new subroutines; and a printing-specific layer of built-in identifiers and operators for rendering graphic images.
It is clearly a powerful (Turing equivalent) image definition language.
PICT and a subset of PostScript are candidates for structured graphics standards.</p>
</div>
<div class="paragraph">
<p>A PostScript document can be printed on any raster output device (including a display) but cannot generally be edited.
That&#8217;s because the original flexibility and constraints have been discarded.
Besides, a PostScript program may use arbitrary computation to supply parameters like placement and size to each operator.
A QuickDraw PICT, in comparison, is a more restricted format of graphic primitives parameterized by constants.
So a PICT can be edited at the level of the primitives, e.g. move or thicken a line.
It cannot be edited at the higher level of, say, the bar chart data which generated the picture.</p>
</div>
<div class="paragraph">
<p>PostScript has another limitation: Not all kinds of data amount to marks on paper.
A musical instrument description is one example.
PostScript is just not geared for such uses.</p>
</div>
<div class="paragraph">
<p>&#8220;DIF&#8221; is another example of data being stored in a general format usable by future programs [<a href="#dif-tech-spec"><em>DIF Technical Specification</em></a>].
DIF is a format for spreadsheet data interchange.
DIF and PostScript are both expressed in plain ASCII text files.
This is very handy for printing, debugging, experimenting, and transmitting across modems.
It can have substantial cost in compaction and read/write work, depending on use.
We won&#8217;t store IFF files this way but we could define an ASCII alternate representation with a converter program.</p>
</div>
<div class="paragraph">
<p>InterScript is Xerox&#8217; standard for interchange of editable documents [<a href="#intro-interscript"><em>Introduction to InterScript</em></a>].
It approaches a harder problem: How to represent editable word processor documents that may contain formatted text, pictures, cross-references like figure numbers, and even highly specialized objects like mathematical equations?
InterScript aims to define one standard representation for each kind of information.
Each InterScript-compatible editor is supposed to preserve the objects it doesn&#8217;t understand and even maintain nested cross-references.
So a simple word processor would let you edit the text of a fancy document without discarding the equations or disrupting the equation numbers.</p>
</div>
<div class="paragraph">
<p>Our task is similarly to store high level information and preserve as much content as practical while moving it between programs.
But we need to span a larger universe of data types and cannot expect to centrally define them all.
Fortunately, we don&#8217;t need to make programs preserve information that they don&#8217;t understand.
And for better or worse, we don&#8217;t have to tackle general-purpose cross-references yet.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part_3"><a class="anchor" href="#part_3"></a>3. Primitive Data Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Atomic components such as integers and characters that are interpretable directly by the CPU are specified in one format for all processors.
We chose a format that&#8217;s most convenient for the Motorola MC68000 processor [<a href="#m68000_man"><em>M68000 16/32-Bit Microprocessor Programmer&#8217;s Reference Manual</em></a>].</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>N.B.: <a href="#part_3">Part 3</a> dictates the format for &#8220;primitive&#8221; data types where&#8201;&#8212;&#8201;and only where&#8201;&#8212;&#8201;used in the overall file structure and standard kinds of chunks (Cf. <em><a href="#_chunks">Chunks</a></em>).
The number of such occurrences will be small enough that the costs of conversion, storage, and management of processor-specific files would far exceed the costs of conversion during I/O by &#8220;foreign&#8221; programs.
A particular data chunk may be specified with a different format for its internal primitive types or with processor- or environment-specific variants if necessary to optimize local usage.
Since that hurts data interchange, it&#8217;s not recommended. (Cf. <em><a href="#_designing_new_data_sections">Designing New Data Sections</a></em>, in <a href="#part_4">Part 4</a>.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_alignment"><a class="anchor" href="#_alignment"></a>Alignment</h3>
<div class="paragraph">
<p>All data objects larger than a byte are aligned on even byte addresses relative to the start of the file.
This may require padding.
Pad bytes are to be written as zeros, but don&#8217;t count on that when reading.</p>
</div>
<div class="paragraph">
<p>This means that every odd-length &#8220;chunk&#8221; (see below) must be padded so that the next one will fall on an even boundary.
Also, designers of structures to be stored in chunks should include pad fields where needed to align every field larger than a byte.
Zeros should be stored in all the pad bytes.</p>
</div>
<div class="paragraph">
<p>Justification: Even-alignment causes a little extra work for files that are used only on certain processors but allows 68000 programs to construct and scan the data in memory and do block I/O.
You just add an occasional pad field to data structures that you&#8217;re going to block read/write or else stream read/write an extra byte.
And the same source code works on all processors.
Unspecified alignment, on the other hand, would force 68000 programs to (dis)assemble word and long-word data one byte at a time.
Pretty cumbersome in a high level language.
And if you don&#8217;t conditionally compile that out for other processors, you won&#8217;t gain anything.</p>
</div>
</div>
<div class="sect2">
<h3 id="_numbers"><a class="anchor" href="#_numbers"></a>Numbers</h3>
<div class="paragraph">
<p>Numeric types supported are two&#8217;s complement binary integers in the format used by the MC68000 processor&#8201;&#8212;&#8201;high byte first, high word first&#8201;&#8212;&#8201;the reverse of 8088 and 6502 format.
They could potentially include signed and unsigned 8, 16, and 32 bit integers but the standard only uses the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>UBYTE   8 bits unsigned
WORD   16 bits signed
UWORD  16 bits unsigned
LONG   32 bits signed</pre>
</div>
</div>
<div class="paragraph">
<p>The actual type definitions depend on the CPU and the compiler.
In this document, we&#8217;ll express data type definitions in the C programming language. [See <a href="#c-ref-man"><em>C, A Reference Manual</em></a>.] In 68000 Lattice C:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c"><span class="hl kwc">typedef</span> <span class="hl kwb">unsigned char</span>   UBYTE<span class="hl opt">;</span>  <span class="hl com">/*   8 bits unsigned  */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">short</span>           WORD<span class="hl opt">;</span>   <span class="hl com">/*  16 bits signed    */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">unsigned short</span>  UWORD<span class="hl opt">;</span>  <span class="hl com">/*  16 bits unsigned  */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">long</span>            LONG<span class="hl opt">;</span>   <span class="hl com">/*  32 bits signed    */</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_characters"><a class="anchor" href="#_characters"></a>Characters</h3>
<div class="paragraph">
<p>The following character set is assumed wherever characters are used, e.g. in text strings, IDs, and TEXT chunks (see below).</p>
</div>
<div class="paragraph">
<p>Characters are encoded in 8-bit ASCII.
Characters in the range NUL (hex 0) through DEL (hex 7F) are well defined by the 7-bit ASCII standard.
IFF uses the graphic group '<code>&#160;</code>' (SP, hex 20) through '<code>~</code>' (hex 7E).</p>
</div>
<div class="paragraph">
<p>Most of the control character group hex 01 through hex 1F have no standard meaning in IFF.
The control character LF (hex 0A) is defined as a &#8220;newline&#8221; character.
It denotes an intentional line break, that is, a paragraph or line terminator. (There is no way to store an automatic line break.
That is strictly a function of the margins in the environment the text is placed.) The control character ESC (hex 1B) is a reserved escape character under the rules of ANSI standard 3.64-1979 American National Standard Additional Control Codes for Use with ASCII, ISO standard 2022, and ISO/DIS standard 6429.2.</p>
</div>
<div class="paragraph">
<p>Characters in the range hex 7F through hex FF are not globally defined in IFF.
They are best left reserved for future standardization.
But note that the FORM type FTXT (formatted text) defines the meaning of these characters within FTXT forms.
In particular, character values hex 7F through hex 9F are control codes while characters hex A0 through hex FF are extended graphic characters like  , as per the ISO and ANSI standards cited above. [See the supplementary document <a href="#ftxt">&#8220;FTXT&#8221; IFF Formatted Text</a>.]</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates"><a class="anchor" href="#_dates"></a>Dates</h3>
<div class="paragraph">
<p>A &#8220;creation date&#8221; is defined as the date and time a stream of data bytes was created. (Some systems call this a &#8220;last modified date&#8221;.) Editing some data changes its creation date.
Moving the data between volumes or machines does not.</p>
</div>
<div class="paragraph">
<p>The IFF standard date format will be one of those used in MS-DOS, Macintosh, or Amiga DOS (probably a 32-bit unsigned number of seconds since a reference point).
Issue: Investigate these three.</p>
</div>
</div>
<div class="sect2">
<h3 id="_type_ids"><a class="anchor" href="#_type_ids"></a>Type IDs</h3>
<div class="paragraph">
<p>A &#8220;type ID&#8221;, &#8220;property name&#8221;, &#8220;FORM type&#8221;, or any other IFF identifier is a 32-bit value: the concatenation of four ASCII characters in the range '<code>&#160;</code>' (SP, hex 20) through '<code>~</code>' (hex 7E).
Spaces (hex 20) should not precede printing characters; trailing spaces are ok.
Control characters are forbidden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c"><span class="hl kwc">typedef</span> CHAR ID<span class="hl opt">[</span><span class="hl num">4</span><span class="hl opt">];</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>IDs are compared using a simple 32-bit case-dependent equality test.</p>
</div>
<div class="paragraph">
<p>Data section type IDs (aka FORM types) are restriced IDs. (Cf. <a href="#part_4"><em>Data Sections</em></a>.) Since they may be stored in filename extensions (Cf. <em><a href="#_single_purpose_files">Single Purpose Files</a></em>) lower case letters and punctuation marks are forbidden.
Trailing spaces are ok.</p>
</div>
<div class="paragraph">
<p>Carefully choose those four characters when you pick a new ID.
Make them mnemonic so programmers can look at an interchange format file and figure out what kind of data it contains.
The name space makes it possible for developers scattered around the globe to generate ID values with minimal collisions so long as they choose specific names like '<code>MUS4</code>' instead of general ones like '<code>TYPE</code>' and '<code>FILE</code>'.
EA will &#8220;register&#8221; new FORM type IDs and format descriptions as they&#8217;re devised, but collisions will be improbable so there will be no pressure on this &#8220;clearinghouse&#8221; process.
<a href="#appendix_a">Appendix A</a> has a list of currently defined IDs.</p>
</div>
<div class="paragraph">
<p>Sometimes it&#8217;s necessary to make data format changes that aren&#8217;t backward compatible.
Since IDs are used to denote data formats in IFF, new IDs are chosen to denote revised formats.
Since programs won&#8217;t read chunks whose IDs they don&#8217;t recognize (see <a href="#_chunks">Chunks</a>, below), the new IDs keep old programs from stumbling over new data.
The conventional way to chose a &#8220;revision&#8221; ID is to increment the last character if it&#8217;s a digit or else change the last character to a digit.
E.g. first and second revisions of the ID <code>XY</code> would be <code>XY1</code> and <code>XY2</code>.
Revisions of '<code>CMAP</code>' would be '<code>CMA1</code>' and '<code>CMA2</code>'.</p>
</div>
</div>
<div class="sect2">
<h3 id="_chunks"><a class="anchor" href="#_chunks"></a>Chunks</h3>
<div class="paragraph">
<p>Chunks are the building blocks in the IFF structure.
The form expressed as a C typedef is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c"><span class="hl kwc">typedef</span> <span class="hl kwb">struct</span> <span class="hl opt">{</span>&#x000A;    ID      ckID<span class="hl opt">;</span>&#x000A;    LONG    ckSize<span class="hl opt">;</span> <span class="hl com">/*  sizeof(ckData)  */</span>&#x000A;    UBYTE   ckData<span class="hl opt">[</span><span class="hl com">/*   ckSize   */</span><span class="hl opt">];</span>&#x000A;    <span class="hl opt">}</span> Chunk<span class="hl opt">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can diagram an example chunk&#8201;&#8212;&#8201;a '<code>CMAP</code>' chunk containing 12 data bytes&#8201;&#8212;&#8201;like this:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="img/EA-IFF-85_1.svg" alt="Box diagram example of an IFF 'CMAP' chunk" width="400">
</div>
</div>
<div class="paragraph">
<p>The fixed header part means &#8220;Here&#8217;s a type ckID chunk with ckSize bytes of data.&#8221;</p>
</div>
<div class="paragraph">
<p>The ckID identifies the format and purpose of the chunk.
As a rule, a program must recognize ckID to interpret ckData.
It should skip over all unrecognized chunks.
The ckID also serves as a format version number as long as we pick new IDs to identify new formats of ckData (see above).</p>
</div>
<div class="paragraph">
<p>The following ckIDs are universally reserved to identify chunks with particular IFF meanings: '<code>LIST</code>', '<code>FORM</code>', '<code>PROP</code>', '<code>CAT&#160;</code>', and '<code>&#160;&#160;&#160;&#160;</code>'.
The special ID '<code>&#160;&#160;&#160;&#160;</code>' (4 spaces) is a ckID for &#8220;filler&#8221; chunks, that is, chunks that fill space but have no meaningful contents.
The IDs '<code>LIS1</code>' through '<code>LIS9</code>', '<code>FOR1</code>' through '<code>FOR9</code>', and '<code>CAT1</code>' through '<code>CAT9</code>' are reserved for future &#8220;version number&#8221; variations.
All IFF-compatible software must account for these 23 chunk IDs.
<a href="#appendix_a">Appendix A</a> has a list of predefined IDs.</p>
</div>
<div class="paragraph">
<p>The ckSize is a logical block size&#8201;&#8212;&#8201;how many data bytes are in ckData.
If ckData is an odd number of bytes long, a 0 pad byte follows which is not included in ckSize. (Cf. <em><a href="#_alignment">Alignment</a></em>.) A chunk&#8217;s total physical size is ckSize rounded up to an even number plus the size of the header.
So the smallest chunk is 8 bytes long with ckSize = 0.
For the sake of following chunks, programs must respect every chunk&#8217;s ckSize as a virtual end-of-file for reading its ckData even if that data is malformed, e.g. if nested contents are truncated.</p>
</div>
<div class="paragraph">
<p>We can describe the syntax of a chunk as a regular expression with <code>&num;</code> representing the ckSize, i.e. the length of the following <code>{</code>braced<code>}</code> bytes.
The <code>[0]</code> represents a sometimes needed pad byte. (The regular expressions in this document are collected in <a href="#appendix_a">Appendix A</a> along with an explanation of notation.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">Chunk</span>   <span class="hl opt">::=</span> <span class="hl kwb">ID</span> #<span class="hl opt">{</span> <span class="hl kwb">UBYTE</span><span class="hl opt">* } [</span>0<span class="hl opt">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>One chunk output technique is to stream write a chunk header, stream write the chunk contents, then random access back to the header to fill in the size.
Another technique is to make a preliminary pass over the data to compute the size, then write it out all at once.</p>
</div>
</div>
<div class="sect2">
<h3 id="_strings_string_chunks_and_string_properties"><a class="anchor" href="#_strings_string_chunks_and_string_properties"></a>Strings, String Chunks, and String Properties</h3>
<div class="paragraph">
<p>In a string of ASCII text, LF denotes a forced line break (paragraph or line terminator).
Other control characters are not used. (Cf. <em><a href="#_characters">Characters</a></em>.)</p>
</div>
<div class="paragraph">
<p>The ckID for a chunk that contains a string of plain, unformatted text is '<code>TEXT</code>'.
As a practical matter, a text string should probably not be longer than 32767 bytes.
The standard allows up to 231 - 1 bytes.</p>
</div>
<div class="paragraph">
<p>When used as a data property (see below), a text string chunk may be 0 to 255 characters long.
Such a string is readily converted to a C string or a Pascal STRING[255].
The ckID of a property must be the property name, not '<code>TEXT</code>'.</p>
</div>
<div class="paragraph">
<p>When used as a part of a chunk or data property, restricted C string format is normally used.
That means 0 to 255 characters followed by a NUL byte (ASCII value 0).</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_properties"><a class="anchor" href="#_data_properties"></a>Data Properties</h3>
<div class="paragraph">
<p>Data properties specify attributes for following (non-property) chunks.
A data property essentially says &#8220;identifier = value&#8221;, for example &#8220;XY = (10, 200)&#8221;, telling something about following chunks.
Properties may only appear inside data sections ('<code>FORM</code>' chunks, cf. <a href="#part_4"><em>Data Sections</em></a>) and property sections ('<code>PROP</code>' chunks, cf. <em><a href="#_group_prop">Group PROP</a></em>).</p>
</div>
<div class="paragraph">
<p>The form of a data property is a special case of Chunk.
The ckID is a property name as well as a property type.
The ckSize should be small since data properties are intended to be accumulated in RAM when reading a file. (256 bytes is a reasonable upper bound.) Syntactically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">Property</span>    <span class="hl opt">::=</span> <span class="hl kwb">Chunk</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When designing a data object, use properties to describe context information like the size of an image, even if they don&#8217;t vary in your program.
Other programs will need this information.</p>
</div>
<div class="paragraph">
<p>Think of property settings as assignments to variables in a programming language.
Multiple assignments are redundant and local assignments temporarily override global assignments.
The order of assignments doesn&#8217;t matter as long as they precede the affected chunks. (Cf. <em><a href="#part_5">LISTs, CATs, and Shared Properties</a></em>.)</p>
</div>
<div class="paragraph">
<p>Each object type (FORM type) is a local name space for property IDs.
Think of a &#8220;CMAP&#8221; property in a &#8220;FORM ILBM&#8221; as the qualified ID &#8220;ILBM.CMAP&#8221;.
Property IDs specified when an object type is designed (and therefore known to all clients) are called &#8220;standard&#8221; while specialized ones added later are &#8220;nonstandard&#8221;.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>Links</h3>
<div class="paragraph">
<p>Issue: A standard mechanism for &#8220;links&#8221; or &#8220;cross references&#8221; is very desirable for things like combining images and sounds into animations.
Perhaps we&#8217;ll define &#8220;link&#8221; chunks within FORMs that refer to other FORMs or to specific chunks within the same and other FORMs.
This needs further work.
EA IFF 1985 has no standard link mechanism.</p>
</div>
<div class="paragraph">
<p>For now, it may suffice to read a list of, say, musical instruments, and then just refer to them within a musical score by index number.</p>
</div>
</div>
<div class="sect2">
<h3 id="_file_references"><a class="anchor" href="#_file_references"></a>File References</h3>
<div class="paragraph">
<p>Issue: We may need a standard form for references to other files.
A &#8220;file ref&#8221; could name a directory and a file in the same type of operating system as the ref&#8217;s originator.
Following the reference would expect the file to be on some mounted volume.
In a network environment, a file ref could name a server, too.</p>
</div>
<div class="paragraph">
<p>Issue: How can we express operating-system independent file refs?</p>
</div>
<div class="paragraph">
<p>Issue: What about a means to reference a portion of another file?
Would this be a &#8220;file ref&#8221; plus a reference to a &#8220;link&#8221; within the target file?</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part_4"><a class="anchor" href="#part_4"></a>4. Data Sections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing we need of a file is to check: Does it contain IFF data and, if so, does it contain the kind of data we&#8217;re looking for?
So we come to the notion of a &#8220;data section&#8221;.</p>
</div>
<div class="paragraph">
<p>A &#8220;data section&#8221; or IFF &#8220;FORM&#8221; is one self-contained &#8220;data object&#8221; that might be stored in a file by itself.
It is one high level data object such as a picture or a sound effect.
The IFF structure '<code>FORM</code>' makes it self-identifying.
It could be a composite object like a musical score with nested musical instrument descriptions.</p>
</div>
<div class="sect2">
<h3 id="_group_form"><a class="anchor" href="#_group_form"></a>Group FORM</h3>
<div class="paragraph">
<p>A data section is a chunk with ckID '<code>FORM</code>' and this arrangement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">FORM</span>        <span class="hl opt">::=</span> <span class="hl str">&quot;FORM&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">FormType</span> <span class="hl opt">(</span><span class="hl kwb">LocalChunk</span> <span class="hl opt">|</span> <span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)* }</span>&#x000A;<span class="hl kwa">FormType</span>    <span class="hl opt">::=</span> <span class="hl kwb">ID</span>&#x000A;<span class="hl kwa">LocalChunk</span>  <span class="hl opt">::=</span> <span class="hl kwb">Property</span> <span class="hl opt">|</span> <span class="hl kwb">Chunk</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ID '<code>FORM</code>' is a syntactic keyword like <code>struct</code> in C.
Think of a &#8220;struct ILBM&#8221; containing a field '<code>CMAP</code>'.
If you see '<code>FORM</code>' you&#8217;ll know to expect a FORM type ID (the structure name, '<code>ILBM</code>' in this example) and a particular contents arrangement or &#8220;syntax&#8221; (local chunks, FORMs, LISTs, and CATs). (LISTs and CATs are discussed in <a href="#part_5">Part 5</a>, below.) A &#8220;FORM ILBM&#8221;, in particular, might contain a local chunk '<code>CMAP</code>', an &#8220;ILBM.CMAP&#8221; (to use a qualified name).</p>
</div>
<div class="paragraph">
<p>So the chunk ID '<code>FORM</code>' indicates a data section.
It implies that the chunk contains an ID and some number of nested chunks.
In reading a FORM, like any other chunk, programs must respect its ckSize as a virtual end-of-file for reading its contents, even if they&#8217;re truncated.</p>
</div>
<div class="paragraph">
<p>The FormType (or FORM type) is a restricted ID that may not contain lower case letters or punctuation characters. (Cf. <em><a href="#_type_ids">Type IDs</a></em>. Cf. <em><a href="#_single_purpose_files">Single Purpose Files</a></em>.)</p>
</div>
<div class="paragraph">
<p>The type-specific information in a FORM is composed of its &#8220;local chunks&#8221;: data properties and other chunks.
Each FORM type is a local name space for local chunk IDs.
So &#8220;CMAP&#8221; local chunks in other FORM types may be unrelated to &#8220;ILBM.CMAP&#8221;.
More than that, each FORM type defines semantic scope.
If you know what a FORM ILBM is, you&#8217;ll know what an ILBM.CMAP is.</p>
</div>
<div class="paragraph">
<p>Local chunks defined when the FORM type is designed (and therefore known to all clients of this type) are called &#8220;standard&#8221; while specialized ones added later are &#8220;nonstandard&#8221;.</p>
</div>
<div class="paragraph">
<p>Among the local chunks, property chunks give settings for various details like text font while the other chunks supply the essential information.
This distinction is not clear cut.
A property setting cancelled by a later setting of the same property has effect only on data chunks in between.
E.g. in the sequence:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>prop1 = x  (propN = value)*  prop1 = y</pre>
</div>
</div>
<div class="paragraph">
<p>where the propNs are not prop1, the setting prop1 = x has no effect.</p>
</div>
<div class="paragraph">
<p>The following universal chunk IDs are reserved inside any FORM: '<code>LIST</code>', '<code>FORM</code>', '<code>PROP</code>', '<code>CAT&#160;</code>', '<code>JJJJ</code>', '<code>LIS1</code>' through '<code>LIS9</code>', '<code>FOR1</code>' through '<code>FOR9</code>', and '<code>CAT1</code>' through '<code>CAT9</code>'. (Cf. <em><a href="#_chunks">Chunks</a></em>. Cf. <em><a href="#_group_list">Group LIST</a></em>. Cf. <em><a href="#_group_prop">Group PROP</a></em>.) For clarity, these universal chunk names may not be FORM type IDs, either.</p>
</div>
<div class="paragraph">
<p><a href="#part_5">Part 5</a>, below, talks about grouping FORMs into LISTs and CATs.
They let you group a bunch of FORMs but don&#8217;t impose any particular meaning or constraints on the grouping.
Read on.</p>
</div>
</div>
<div class="sect2">
<h3 id="_composite_forms"><a class="anchor" href="#_composite_forms"></a>Composite FORMs</h3>
<div class="paragraph">
<p>A FORM chunk inside a FORM is a full-fledged data section.
This means you can build a composite object like a multi-frame animation sequence from available picture FORMs and sound effect FORMs.
You can insert additional chunks with information like frame rate and frame count.</p>
</div>
<div class="paragraph">
<p>Using composite FORMs, you leverage on existing programs that create and edit the component FORMs.
Those editors may even look into your composite object to copy out its type of component, although it&#8217;ll be the rare program that&#8217;s fancy enough to do that.
Such editors are not allowed to replace their component objects within your composite object.
That&#8217;s because the IFF standard lets you specify consistency requirements for the composite FORM such as maintaining a count or a directory of the components.
Only programs that are written to uphold the rules of your FORM type should create or modify such FORMs.</p>
</div>
<div class="paragraph">
<p>Therefore, in designing a program that creates composite objects, you are strongly requested to provide a facility for your users to import and export the nested FORMs.
Import and export could move the data through a clipboard or a file.</p>
</div>
<div class="paragraph">
<p>Here are several existing FORM types and rules for defining new ones.</p>
</div>
<div class="sect3">
<h4 id="_ftxt"><a class="anchor" href="#_ftxt"></a>FTXT</h4>
<div class="paragraph">
<p>An FTXT data section contains text with character formatting information like fonts and faces.
It has no paragraph or document formatting information like margins and page headers.
FORM FTXT is well matched to the text representation in Amiga&#8217;s Intuition environment.
See the supplemental document <a href="#ftxt">&#8220;FTXT&#8221; IFF Formatted Text</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ilbm"><a class="anchor" href="#_ilbm"></a>ILBM</h4>
<div class="paragraph">
<p>&#8220;ILBM&#8221; is an InterLeaved BitMap image with color map; a machine-independent format for raster images.
FORM ILBM is the standard image file format for the Commodore-Amiga computer and is useful in other environments, too.
See the supplemental document &#8220;ILBM&#8221; IFF Interleaved Bitmap.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pics"><a class="anchor" href="#_pics"></a>PICS</h4>
<div class="paragraph">
<p>The data chunk inside a &#8220;PICS&#8221; data section has ID '<code>PICT</code>' and holds a QuickDraw picture.
Issue: Allow more than one PICT in a PICS?
See Inside Macintosh chapter &#8220;QuickDraw&#8221; for details on PICTs and how to create and display them on the Macintosh computer.</p>
</div>
<div class="paragraph">
<p>The only standard property for PICS is <code>XY</code>, an optional property that indicates the position of the PICT relative to &#8220;the big picture&#8221;.
The contents of an XY is a QuickDraw Point.</p>
</div>
<div class="paragraph">
<p>Note: PICT may be limited to Macintosh use, in which case there&#8217;ll
be another format for structured graphics in other environments.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_macintosh_resource_types"><a class="anchor" href="#_other_macintosh_resource_types"></a>Other Macintosh Resource Types</h3>
<div class="paragraph">
<p>Some other Macintosh resource types could be adopted for use within IFF files; perhaps MWRT, ICN, ICN#, and STR#.</p>
</div>
<div class="paragraph">
<p>Issue: Consider the candidates and reserve some more IDs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_designing_new_data_sections"><a class="anchor" href="#_designing_new_data_sections"></a>Designing New Data Sections</h3>
<div class="paragraph">
<p>Supplemental documents will define additional object types.
A supplement needs to specify the object&#8217;s purpose, its FORM type ID, the IDs and formats of standard local chunks, and rules for generating and interpreting the data.
It&#8217;s a good idea to supply typedefs and an example source program that accesses the new object.
See &#8220;ILBM&#8221; IFF Interleaved Bitmap for a good example.</p>
</div>
<div class="paragraph">
<p>Anyone can pick a new FORM type ID but should reserve it with Electronic Arts at their earliest convenience. [Issue: EA contact person?
Hand this off to another organization?] While decentralized format definitions and extensions are possible in IFF, our preference is to get design consensus by committee, implement a program to read and write it, perhaps tune the format, and then publish the format with example code.
Some organization should remain in charge of answering questions and coordinating extensions to the format.</p>
</div>
<div class="paragraph">
<p>If it becomes necessary to revise the design of some data section, its FORM type ID will serve as a version number (Cf. <em><a href="#_type_ids">Type IDs</a></em>).
E.g. a revised '<code>VDEO</code>' data section could be called '<code>VDE1</code>'.
But try to get by with compatible revisions within the existing FORM type.</p>
</div>
<div class="paragraph">
<p>In a new FORM type, the rules for primitive data types and word-alignment (Cf. <em><a href="#part_3">Primitive Data Types</a></em>) may be overriden for the contents of its local chunks&#8201;&#8212;&#8201;but not for the chunk structure itself&#8201;&#8212;&#8201;if your documentation spells out the deviations.
If machine-specific type variants are needed, e.g. to store vast numbers of integers in reverse bit order, then outline the conversion algorithm and indicate the variant inside each file, perhaps via different FORM types.
Needless to say, variations should be minimized.</p>
</div>
<div class="paragraph">
<p>In designing a FORM type, encapsulate all the data that other programs will need to interpret your files.
E.g. a raster graphics image should specify the image size even if your program always uses 320 x 200 pixels x 3 bitplanes.
Receiving programs are then empowered to append or clip the image rectangle, to add or drop bitplanes, etc.
This enables a lot more compatibility.</p>
</div>
<div class="paragraph">
<p>Separate the central data (like musical notes) from more specialized information (like note beams) so simpler programs can extract the central parts during read-in.
Leave room for expansion so other programs can squeeze in new kinds of information (like lyrics).
And remember to keep the property chunks manageably short&#8201;&#8212;&#8201;let&#8217;s say &lt; 256 bytes.</p>
</div>
<div class="paragraph">
<p>When designing a data object, try to strike a good tradeoff between a super-general format and a highly-specialized one.
Fit the details to at least one particular need, for example a raster image might as well store pixels in the current machine&#8217;s scan order.
But add the kind of generality that makes it usable with foreseeable hardware and software.
E.g. use a whole byte for each red, green, and blue color value even if this year&#8217;s computer has only 4-bit video DACs.
Think ahead and help other programs so long as the overhead is acceptable.
E.g. run compress a raster by scan line rather than as a unit so future programs can swap images by scan line to and from secondary storage.</p>
</div>
<div class="paragraph">
<p>Try to design a general purpose &#8220;least common multiple&#8221; format that encompasses the needs of many programs without getting too complicated.
Let&#8217;s coalesce our uses around a few such formats widely separated in the vast design space.
Two factors make this flexibility and simplicity practical.
First, file storage space is getting very plentiful, so compaction is not a priority.
Second, nearly any locally-performed data conversion work during file reading and writing will be cheap compared to the I/O time.</p>
</div>
<div class="paragraph">
<p>It must be ok to copy a LIST or FORM or CAT intact, e.g. to incorporate it into a composite FORM.
So any kind of internal references within a FORM must be relative references.
They could be relative to the start of the containing FORM, relative from the referencing chunk, or a sequence number into a collection.</p>
</div>
<div class="paragraph">
<p>With composite FORMs, you leverage on existing programs that create and edit the components.
If you write a program that creates composite objects, please provide a facility for your users to import and export the nested FORMs.
The import and export functions may move data through a separate file or a clipboard.</p>
</div>
<div class="paragraph">
<p>Finally, don&#8217;t forget to specify all implied rules in detail.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part_5"><a class="anchor" href="#part_5"></a>5. LISTs, CATs, and Shared Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data often needs to be grouped together like a list of icons.
Sometimes a trick like arranging little images into a big raster works, but generally they&#8217;ll need to be structured as a first class group.
The objects &#8220;LIST&#8221; and &#8220;CAT&#8221; are IFF-universal mechanisms for this purpose.</p>
</div>
<div class="paragraph">
<p>Property settings sometimes need to be shared over a list of similar objects.
E.g. a list of icons may share one color map.
LIST provides a means called &#8220;PROP&#8221; to do this.
One purpose of a LIST is to define the scope of a PROP.
A &#8220;CAT&#8221;, on the other hand, is simply a concatenation of objects.</p>
</div>
<div class="paragraph">
<p>Simpler programs may skip LISTs and PROPs altogether and just handle FORMs and CATs.
All &#8220;fully-conforming&#8221; IFF programs also know about '<code>CAT&#160;</code>', '<code>LIST</code>', and '<code>PROP</code>'.
Any program that reads a FORM inside a LIST must process shared PROPs to correctly interpret that FORM.</p>
</div>
<div class="sect2">
<h3 id="_group_cat"><a class="anchor" href="#_group_cat"></a>Group CAT</h3>
<div class="paragraph">
<p>A CAT is just an untyped group of data objects.</p>
</div>
<div class="paragraph">
<p>Structurally, a CAT is a chunk with chunk ID '<code>CAT&#160;</code>' containing a &#8220;contents type&#8221; ID followed by the nested objects.
The ckSize of each contained chunk is essentially a relative pointer to the next one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">CAT</span> <span class="hl opt">::=</span> <span class="hl str">&quot;CAT &quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">ContentsType</span> <span class="hl opt">(</span><span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)* }</span>&#x000A;<span class="hl kwa">ContentsType</span>    <span class="hl opt">::=</span> <span class="hl kwb">ID</span>  <span class="hl slc">-- a hint or an &quot;abstract data type&quot; ID</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In reading a CAT, like any other chunk, programs must respect it&#8217;s ckSize as a virtual end-of-file for reading the nested objects even if they&#8217;re malformed or truncated.</p>
</div>
<div class="paragraph">
<p>The &#8220;contents type&#8221; following the CAT&#8217;s ckSize indicates what kind of FORMs are inside.
So a CAT of ILBMs would store '<code>ILBM</code>' there.
It&#8217;s just a hint.
It may be used to store an &#8220;abstract data type&#8221;.
A CAT could just have blank contents ID ('<code>JJJJ</code>') if it contains more than one kind of FORM.</p>
</div>
<div class="paragraph">
<p>CAT defines only the format of the group.
The group&#8217;s meaning is open to interpretation.
This is like a list in LISP: the structure of cells is predefined but the meaning of the contents as, say, an association list depends on use.
If you need a group with an enforced meaning (an &#8220;abstract data type&#8221; or Smalltalk &#8220;subclass&#8221;), some consistency constraints, or additional data chunks, use a composite FORM instead (Cf. <em><a href="#_composite_forms">Composite FORMs</a></em>).</p>
</div>
<div class="paragraph">
<p>Since a CAT just means a concatenation of objects, CATs are rarely nested.
Programs should really merge CATs rather than nest them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_group_list"><a class="anchor" href="#_group_list"></a>Group LIST</h3>
<div class="paragraph">
<p>A LIST defines a group very much like CAT but it also gives a scope for PROPs (see below).
And unlike CATs, LISTs should not be merged without understanding their contents.</p>
</div>
<div class="paragraph">
<p>Structurally, a LIST is a chunk with ckID '<code>LIST</code>' containing a &#8220;contents type&#8221; ID, optional shared properties, and the nested contents (FORMs, LISTs, and CATs), in that order.
The ckSize of each contained chunk is a relative pointer to the next one.
A LIST is not an arbitrary linked list&#8201;&#8212;&#8201;the cells are simply concatenated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">LIST</span>    <span class="hl opt">::=</span> <span class="hl str">&quot;LIST&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">ContentsType PROP</span><span class="hl opt">* (</span><span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)* }</span>&#x000A;<span class="hl kwa">ContentsType</span>    <span class="hl opt">::=</span> <span class="hl kwb">ID</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_group_prop"><a class="anchor" href="#_group_prop"></a>Group PROP</h3>
<div class="paragraph">
<p>PROP chunks may appear in LISTs (not in FORMs or CATs).
They supply shared properties for the FORMs in that LIST.
This ability to elevate some property settings to shared status for a list of forms is useful for both indirection and compaction.
E.g. a list of images with the same size and colors can share one &#8220;size&#8221; property and one &#8220;color map&#8221; property.
Individual FORMs can override the shared settings.</p>
</div>
<div class="paragraph">
<p>The contents of a PROP is like a FORM with no data chunks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">PROP</span>    <span class="hl opt">::=</span> <span class="hl str">&quot;PROP&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">FormType Property</span><span class="hl opt">* }</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It means, "Here are the shared properties for FORM type &lt;&lt;FormType&gt;."</p>
</div>
<div class="paragraph">
<p>A LIST may have at most one PROP of a FORM type, and all the PROPs must appear before any of the FORMs or nested LISTs and CATs.
You can have subsequences of FORMs sharing properties by making each subsequence a LIST.</p>
</div>
<div class="paragraph">
<p>Scoping: Think of property settings as variable bindings in nested blocks of a programming language.
Where in C you could write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c">TEXT_FONT text_font <span class="hl opt">=</span> Courier<span class="hl opt">;</span>  <span class="hl com">/*  program&#39;s global default  */</span>&#x000A;&#x000A;<span class="hl kwd">File</span><span class="hl opt">(); {</span>&#x000A;    TEXT_FONT text_font <span class="hl opt">=</span> TimesRoman<span class="hl opt">;</span>   <span class="hl com">/*  shared setting    */</span>&#x000A;&#x000A;        <span class="hl opt">{</span>&#x000A;        TEXT_FONT text_font <span class="hl opt">=</span> Helvetica<span class="hl opt">;</span>  <span class="hl com">/*  local setting   */</span>&#x000A;        <span class="hl kwd">Print</span><span class="hl opt">(</span><span class="hl str">&quot;Hello &quot;</span><span class="hl opt">);</span>    <span class="hl com">/*  uses font Helvetica   */</span>&#x000A;        <span class="hl opt">}</span>&#x000A;&#x000A;        <span class="hl opt">{</span>&#x000A;        <span class="hl kwd">Print</span><span class="hl opt">(</span><span class="hl str">&quot;there.&quot;</span><span class="hl opt">);</span>    <span class="hl com">/*  uses font TimesRoman  */</span>&#x000A;        <span class="hl opt">}</span>&#x000A;    <span class="hl opt">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An IFF file could contain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c">LIST <span class="hl opt">{</span>&#x000A;    PROP TEXT <span class="hl opt">{</span>&#x000A;        FONT <span class="hl opt">{</span>TimesRoman<span class="hl opt">}</span>   <span class="hl com">/*  shared setting  */</span>&#x000A;        <span class="hl opt">}</span>&#x000A;&#x000A;    FORM TEXT <span class="hl opt">{</span>&#x000A;        FONT <span class="hl opt">{</span>Helvetica<span class="hl opt">}</span>    <span class="hl com">/*  local setting        */</span>&#x000A;        CHRS <span class="hl opt">{</span>Hello <span class="hl opt">}</span>       <span class="hl com">/*  uses font Helvetica  */</span>&#x000A;        <span class="hl opt">}</span>&#x000A;&#x000A;    FORM TEXT <span class="hl opt">{</span>&#x000A;        CHRS <span class="hl opt">{</span>there<span class="hl opt">.}</span>       <span class="hl com">/*  uses font TimesRoman  */</span>&#x000A;        <span class="hl opt">}</span>&#x000A;    <span class="hl opt">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The shared property assignments selectively override the reader&#8217;s global defaults, but only for FORMs within the group.
A FORM&#8217;s own property assignments selectively override the global and group-supplied values.
So when reading an IFF file, keep property settings on a stack.
They&#8217;re designed to be small enough to hold in main memory.</p>
</div>
<div class="paragraph">
<p>Shared properties are semantically equivalent to copying those properties into each of the nested FORMs right after their FORM type IDs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_properties_for_list"><a class="anchor" href="#_properties_for_list"></a>Properties for LIST</h3>
<div class="paragraph">
<p>Optional &#8220;properties for LIST&#8221; store the origin of the list&#8217;s contents in a PROP chunk for the fake FORM type &#8220;LIST&#8221;.
They are the properties originating program '<code>OPGM</code>', processor family '<code>OCPU</code>', computer type '<code>OCMP</code>', computer serial number or network address <code>OSN&#160;</code>, and user name '<code>UNAM</code>'.
In our imperfect world, these could be called upon to distinguish between unintended variations of a data format or to work around bugs in particular originating/receiving program pairs.
Issue: Specify the format of these properties.</p>
</div>
<div class="paragraph">
<p>A creation date could also be stored in a property but let&#8217;s ask that file creating, editing, and transporting programs maintain the correct date in the local file system.
Programs that move files between machine types are expected to copy across the creation dates.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part_6"><a class="anchor" href="#part_6"></a>6. Standard File Structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_file_structure_overview"><a class="anchor" href="#_file_structure_overview"></a>File Structure Overview</h3>
<div class="paragraph">
<p>An IFF file is just a single chunk of type FORM, LIST, or CAT.
Therefore an IFF file can be recognized by its first 4 bytes: '<code>FORM</code>', '<code>LIST</code>', or '<code>CAT&#160;</code>'.
Any file contents after the chunk&#8217;s end are to be ignored.</p>
</div>
<div class="paragraph">
<p>Since an IFF file can be a group of objects, programs that read/write single objects can communicate to an extent with programs that read/write groups.
You&#8217;re encouraged to write programs that handle all the objects in a LIST or CAT.
A graphics editor, for example, could process a list of pictures as a multiple page document, one page at a time.</p>
</div>
<div class="paragraph">
<p>Programs should enforce IFF&#8217;s syntactic rules when reading and writing files.
This ensures robust data transfer.
The public domain IFF reader/writer subroutine package does this for you.
A utility program &#8220;IFFCheck&#8221; is available that scans an IFF file and checks it for conformance to IFF&#8217;s syntactic rules.
IFFCheck also prints an outline of the chunks in the file, showing the ckID and ckSize of each.
This is quite handy when building IFF programs.
Example programs are also available to show details of reading and writing IFF files.</p>
</div>
<div class="paragraph">
<p>A merge program &#8220;IFFJoin&#8221; will be available that logically appends IFF files into a single CAT group.
It &#8220;unwraps&#8221; each input file that is a CAT so that the combined file isn&#8217;t nested CATs.</p>
</div>
<div class="paragraph">
<p>If we need to revise the IFF standard, the three anchoring IDs will be used as &#8220;version numbers&#8221;.
That&#8217;s why IDs '<code>FOR1</code>' through '<code>FOR9</code>', '<code>LIS1</code>' through '<code>LIS9</code>', and '<code>CAT1</code>' through '<code>CAT9</code>' are reserved.</p>
</div>
<div class="paragraph">
<p>IFF formats are designed for reasonable performance with floppy disks.
We achieve considerable simplicity in the formats and programs by relying on the host file system rather than defining universal grouping structures like directories for LIST contents.
On huge storage systems, IFF files could be leaf nodes in a file structure like a B-tree.
Let&#8217;s hope the host file system implements that for us!</p>
</div>
<div class="paragraph">
<p>Thre are two kinds of IFF files: single purpose files and scrap files.
They differ in the interpretation of multiple data objects and in the file&#8217;s external type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_single_purpose_files"><a class="anchor" href="#_single_purpose_files"></a>Single Purpose Files</h3>
<div class="paragraph">
<p>A single purpose IFF file is for normal &#8220;document&#8221; and &#8220;archive&#8221; storage.
This is in contrast with &#8220;scrap files&#8221; (see below) and temporary backing storage (non-interchange files).</p>
</div>
<div class="paragraph">
<p>The external file type (or filename extension, depending on the host file system) indicates the file&#8217;s contents.
It&#8217;s generally the FORM type of the data contained, hence the restrictions on FORM type IDs.</p>
</div>
<div class="paragraph">
<p>Programmers and users may pick an &#8220;intended use&#8221; type as the filename extension to make it easy to filter for the relevant files in a filename requestor.
This is actually a &#8220;subclass&#8221; or &#8220;subtype&#8221; that conveniently separates files of the same FORM type that have different uses.
Programs cannot demand conformity to its expected subtypes without overly restricting data interchange since they cannot know about the subtypes to be used by future programs that users will want to exchange data with.</p>
</div>
<div class="paragraph">
<p>Issue: How to generate 3-letter MS-DOS extensions from 4-letter FORM type IDs?</p>
</div>
<div class="paragraph">
<p>Most single purpose files will be a single FORM (perhaps a composite FORM like a musical score containing nested FORMs like musical instrument descriptions).
If it&#8217;s a LIST or a CAT, programs should skip over unrecognized objects to read the recognized ones or the first recognized one.
Then a program that can read a single purpose file can read something out of a &#8220;scrap file&#8221;, too.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scrap_files"><a class="anchor" href="#_scrap_files"></a>Scrap Files</h3>
<div class="paragraph">
<p>A &#8220;scrap file&#8221; is for maximum interconnectivity in getting data between programs; the core of a clipboard function.
Scrap files may have type <code>IFF&#160;</code> or filename extension &#8220;.IFF&#8221;.</p>
</div>
<div class="paragraph">
<p>A scrap file is typically a CAT containing alternate representations of the same basic information.
Include as many alternatives as you can readily generate.
This redundancy improves interconnectivity in situations where we can&#8217;t make all programs read and write super-general formats. [<a href="#inside_macintosh"><em>Inside Macintosh</em></a> chapter &#8220;Scrap Manager&#8221;.] E.g. a graphically-annotated musical score might be supplemented by a stripped down 4-voice melody and by a text (the lyrics).</p>
</div>
<div class="paragraph">
<p>The originating program should write the alternate representations in order of &#8220;preference&#8221;: most preferred (most comprehensive) type to least preferred (least comprehensive) type.
A receiving program should either use the first appearing type that it understands or search for its own &#8220;preferred&#8221; type.</p>
</div>
<div class="paragraph">
<p>A scrap file should have at most one alternative of any type. (A LIST of same type objects is ok as one of the alternatives.) But don&#8217;t count on this when reading; ignore extra sections of a type.
Then a program that reads scrap files can read something out of single purpose files.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rules_for_reader_programs"><a class="anchor" href="#_rules_for_reader_programs"></a>Rules for Reader Programs</h3>
<div class="paragraph">
<p>Here are some notes on building programs that read IFF files.
If you use the standard IFF reader module &#8220;IFFR.C&#8221;, many of these rules and details will be automatically handled. (See &#8220;<a href="#_support_software">Support Software</a>&#8221; in <a href="#appendix_a">Appendix A</a>.) We recommend that you start from the example program &#8220;ShowILBM.C&#8221;.
You should also read up on recursive descent parsers. [See, for example, <a href="#compiler-construction"><em>Compiler Construction, An Advanced Course</em></a>.]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The standard is very flexible so many programs can exchange data.
This implies a program has to scan the file and react to what&#8217;s actually there in whatever order it appears.
An IFF reader program is a parser.</p>
</li>
<li>
<p>For interchange to really work, programs must be willing to do some conversion during read-in.
If the data isn&#8217;t exactly what you expect, say, the raster is smaller than those created by your program, then adjust it.
Similarly, your program could crop a large picture, add or drop bitplanes, and create/discard a mask plane.
The program should give up gracefully on data that it can&#8217;t convert.</p>
</li>
<li>
<p>If it doesn&#8217;t start with '<code>FORM</code>', '<code>LIST</code>', or '<code>CAT&#160;</code>', it&#8217;s not an IFF-85 file.</p>
</li>
<li>
<p>For any chunk you encounter, you must recognize its type ID to understand its contents.</p>
</li>
<li>
<p>For any FORM chunk you encounter, you must recognize its FORM type ID to understand the contained &#8220;local chunks&#8221;.
Even if you don&#8217;t recognize the FORM type, you can still scan it for nested FORMs, LISTs, and CATs of interest.</p>
</li>
<li>
<p>Don&#8217;t forget to skip the pad byte after every odd-length chunk.</p>
</li>
<li>
<p>Chunk types LIST, FORM, PROP, and CAT are generic groups.
They always contain a subtype ID followed by chunks.</p>
</li>
<li>
<p>Readers ought to handle a CAT of FORMs in a file.
You may treat the FORMs like document pages to sequence through or just use the first FORM.</p>
</li>
<li>
<p>Simpler IFF readers completely skip LISTs. "Fully IFF-conforming" readers are those that handle LISTs, even if just to read the first FORM from a file.
If you do look into a LIST, you must process shared properties (in PROP chunks) properly.
The idea is to get the correct data or none at all.</p>
</li>
<li>
<p>The nicest readers are willing to look into unrecognized FORMs for nested FORM types that they do recognize.
For example, a musical score may contain nested instrument descriptions and an animation file may contain still pictures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note to programmers: Processing PROP chunks is not simple!
You&#8217;ll need some background in interpreters with stack frames.
If this is foreign to you, build programs that read/write only one FORM per file.
For the more intrepid programmers, the next paragraph summarizes how to process LISTs and PROPs.
See the general IFF reader module &#8220;IFFR.C&#8221; and the example program &#8220;ShowILBM.C&#8221; for details.</p>
</div>
<div class="paragraph">
<p>Allocate a stack frame for every LIST and FORM you encounter and initialize it by copying the stack frame of the parent LIST or FORM.
At the top level, you&#8217;ll need a stack frame initialized to your program&#8217;s global defaults.
While reading each LIST or FORM, store all encountered properties into the current stack frame.
In the example ShowILBM, each stack frame has a place for a bitmap header property ILBM.BMHD and a color map property ILBM.CMAP.
When you finally get to the ILBM&#8217;s BODY chunk, use the property settings accumulated in the current stack frame.</p>
</div>
<div class="paragraph">
<p>An alternate implementation would just remember PROPs encountered, forgetting each on reaching the end of its scope (the end of the containing LIST).
When a FORM XXXX is encountered, scan the chunks in all remembered PROPs XXXX, in order, as if they appeared before the chunks actually in the FORM XXXX.
This gets trickier if you read FORMs inside of FORMs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rules_for_writer_programs"><a class="anchor" href="#_rules_for_writer_programs"></a>Rules for Writer Programs</h3>
<div class="paragraph">
<p>Here are some notes on building programs that write IFF files, which is much easier than reading them.
If you use the standard IFF writer module &#8220;IFFW.C&#8221; (see &#8220;<a href="#_support_software">Support Software</a>&#8221; in <a href="#appendix_a">Appendix A</a>), many of these rules and details will automatically be enforced.
See the example program &#8220;Raw2ILBM.C&#8221;.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An IFF file is a single FORM, LIST, or CAT chunk.</p>
</li>
<li>
<p>Any IFF-85 file must start with the 4 characters '<code>FORM</code>', '<code>LIST</code>', or '<code>CAT&#160;</code>', followed by a LONG ckSize.
There should be no data after the chunk end.</p>
</li>
<li>
<p>Chunk types LIST, FORM, PROP, and CAT are generic.
They always contain a subtype ID followed by chunks.
These three IDs are universally reserved, as are '<code>LIS1</code>' through '<code>LIS9</code>', '<code>FOR1</code>' through '<code>FOR9</code>', '<code>CAT1</code>' through '<code>CAT9</code>', and '<code>&#160;&#160;&#160;&#160;</code>'.</p>
</li>
<li>
<p>Don&#8217;t forget to write a 0 pad byte after each odd-length chunk.</p>
</li>
<li>
<p>Four techniques for writing an IFF group: (1) build the data in a file mapped into virtual memory, (2) build the data in memory blocks and use block I/O, (3) stream write the data piecemeal and (don&#8217;t forget!) random access back to set the group length count, and (4) make a preliminary pass to compute the length count then stream write the data.</p>
</li>
<li>
<p>Do not try to edit a file that you don&#8217;t know how to create.
Programs may look into a file and copy out nested FORMs of types that they recognize, but don&#8217;t edit and replace the nested FORMs and don&#8217;t add or remove them.
That could make the containing structure inconsistent.
You may write a new file containing items you copied (or copied and modified) from another IFF file, but don&#8217;t copy structural parts you don&#8217;t understand.</p>
</li>
<li>
<p>You must adhere to the syntax descriptions in Appendex A.
E.g. PROPs may only appear inside LISTs.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_a"><a class="anchor" href="#appendix_a"></a>Appendix A: Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_type_definitions"><a class="anchor" href="#_type_definitions"></a>Type Definitions</h3>
<div class="paragraph">
<p>The following C typedefs describe standard IFF structures.
Declarations to use in practice will vary with the CPU and compiler.
For example, 68000 Lattice C produces efficient comparison code if we define ID as a '<code>LONG</code>'.
A macro <code>MakeID</code> builds these IDs at compile time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="c"><code class="language-c" data-lang="c"><span class="hl com">/*  Standard IFF types, expressed in 68000 Lattice C.  */</span>&#x000A;&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">unsigned char</span> UBYTE<span class="hl opt">;</span>   <span class="hl com">/*   8 bits unsigned  */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">short</span> WORD<span class="hl opt">;</span>            <span class="hl com">/*  16 bits signed    */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">unsigned short</span> UWORD<span class="hl opt">;</span>  <span class="hl com">/*  16 bits unsigned  */</span>&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">long</span> LONG<span class="hl opt">;</span>             <span class="hl com">/*  32 bits signed    */</span>&#x000A;&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">char</span> ID<span class="hl opt">[</span><span class="hl num">4</span><span class="hl opt">];</span>  <span class="hl com">/*  4 chars in &#39; &#39; through &#39;~&#39;  */</span>&#x000A;&#x000A;<span class="hl kwc">typedef</span> <span class="hl kwb">struct</span> <span class="hl opt">{</span>&#x000A;    ID  ckID<span class="hl opt">;</span>&#x000A;    LONG    ckSize<span class="hl opt">;</span> <span class="hl com">/*  sizeof(ckData)  */</span>&#x000A;    UBYTE   ckData<span class="hl opt">[</span><span class="hl com">/*   ckSize   */</span><span class="hl opt">];</span>&#x000A;    <span class="hl opt">}</span> Chunk<span class="hl opt">;</span>&#x000A;&#x000A;<span class="hl com">/*  ID typedef and builder for 68000 Lattice C.  */</span>&#x000A;<span class="hl kwc">typedef</span> LONG ID<span class="hl opt">;</span>     <span class="hl com">/*  4 chars in &#39; &#39; through &#39;~&#39;  */</span>&#x000A;<span class="hl ppc">#define MakeID(a,b,c,d) ( (a)&lt;&lt;&lt;&lt;24 | (b)&lt;&lt;&lt;&lt;16 | (C)&lt;&lt;&lt;&lt;8 | (d) )</span>&#x000A;&#x000A;<span class="hl com">/*  Globally reserved IDs.  */</span>&#x000A;<span class="hl ppc">#define ID_FORM   MakeID(</span><span class="hl pps">&#39;F&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;O&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;R&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;M&#39;</span><span class="hl ppc">)</span>&#x000A;<span class="hl ppc">#define ID_LIST   MakeID(</span><span class="hl pps">&#39;L&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;I&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;S&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;T&#39;</span><span class="hl ppc">)</span>&#x000A;<span class="hl ppc">#define ID_PROP   MakeID(</span><span class="hl pps">&#39;P&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;R&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;O&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;P&#39;</span><span class="hl ppc">)</span>&#x000A;<span class="hl ppc">#define ID_CAT    MakeID(</span><span class="hl pps">&#39;C&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;A&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39;T&#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39; &#39;</span><span class="hl ppc">)</span>&#x000A;<span class="hl ppc">#define ID_FILLER MakeID(</span><span class="hl pps">&#39; &#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39; &#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39; &#39;</span><span class="hl ppc">,</span><span class="hl pps">&#39; &#39;</span><span class="hl ppc">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_syntax_definitions"><a class="anchor" href="#_syntax_definitions"></a>Syntax Definitions</h3>
<div class="paragraph">
<p>Here&#8217;s a collection of the syntax definitions in this document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight" lang="ebnf"><code class="language-ebnf" data-lang="ebnf"><span class="hl kwa">Chunk</span>   <span class="hl opt">::=</span> <span class="hl kwb">ID</span> #<span class="hl opt">{</span> <span class="hl kwb">UBYTE</span><span class="hl opt">* } [</span>0<span class="hl opt">]</span>&#x000A;&#x000A;<span class="hl kwa">Property</span>    <span class="hl opt">::=</span> <span class="hl kwb">Chunk</span>&#x000A;&#x000A;<span class="hl kwa">FORM</span>    <span class="hl opt">::=</span> <span class="hl str">&quot;FORM&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">FormType</span> <span class="hl opt">(</span><span class="hl kwb">LocalChunk</span> <span class="hl opt">|</span> <span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)*</span>&#x000A;<span class="hl opt">}</span>&#x000A;<span class="hl kwa">FormType</span>    <span class="hl opt">::=</span> <span class="hl kwb">ID</span>&#x000A;<span class="hl kwa">LocalChunk</span>  <span class="hl opt">::=</span> <span class="hl kwb">Property</span> <span class="hl opt">|</span> <span class="hl kwb">Chunk</span>&#x000A;&#x000A;<span class="hl kwa">CAT</span> <span class="hl opt">::=</span> <span class="hl str">&quot;CAT &quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">ContentsType</span> <span class="hl opt">(</span><span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)* }</span>&#x000A;<span class="hl kwa">ContentsType</span>    <span class="hl opt">::=</span> <span class="hl kwb">ID</span>  <span class="hl slc">-- a hint or an &quot;abstract data type&quot; ID</span>&#x000A;&#x000A;<span class="hl kwa">LIST</span>    <span class="hl opt">::=</span> <span class="hl str">&quot;LIST&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">ContentsType PROP</span><span class="hl opt">* (</span><span class="hl kwb">FORM</span> <span class="hl opt">|</span> <span class="hl kwb">LIST</span> <span class="hl opt">|</span> <span class="hl kwb">CAT</span><span class="hl opt">)* }</span>&#x000A;<span class="hl kwa">PROP</span>    <span class="hl opt">::=</span> <span class="hl str">&quot;PROP&quot;</span> #<span class="hl opt">{</span> <span class="hl kwb">FormType Property</span><span class="hl opt">* }</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this extended regular expression notation, the token <code>&num;</code> represents a ckSize LONG count of the following {braced} data bytes.
Literal items are shown in &#8220;quotes&#8221;, [square bracketed items] are optional, and <code>&ast;</code> means 0 or more instances.
A sometimes-needed pad byte is shown as "[0]".</p>
</div>
</div>
<div class="sect2">
<h3 id="_defined_chunk_ids"><a class="anchor" href="#_defined_chunk_ids"></a>Defined Chunk IDs</h3>
<div class="paragraph">
<p>This is a table of currently defined chunk IDs.
We may also borrow some Macintosh IDs and data formats.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Group chunk IDs
    FORM, LIST, PROP, CAT.
Future revision group chunk IDs
    FOR1 I FOR9, LIS1 I LIS9, CAT1 I CAT9.
FORM type IDs
    (The above group chunk IDs may not be used for FORM type IDs.)
    (Lower case letters and punctuation marks are forbidden in FORM
type IDs.)
    8SVX 8-bit sampled sound voice, ANBM animated bitmap, FNTR raster
font, FNTV vector font, FTXT formatted text, GSCR general-use musical
score, ILBM interleaved raster bitmap image, PDEF Deluxe Print page
definition, PICS Macintosh picture, PLBM (obsolete), USCR Uhuru Sound
Software musical score, UVOX Uhuru Sound Software Macintosh voice,
SMUS simple musical score, VDEO Deluxe Video Construction Set video.
Data chunk IDs
    "JJJJ", TEXT, PICT.
PROP LIST property IDs
    OPGM, OCPU, OCMP, OSN, UNAM.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_support_software"><a class="anchor" href="#_support_software"></a>Support Software</h3>
<div class="paragraph">
<p>These public domain C source programs are available for use in building IFF-compatible programs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">IFF.H, IFFR.C, IFFW.C </dt>
<dd>
<p>IFF reader and writer package.
These modules handle many of the details of reliably reading and writing IFF files.</p>
</dd>
<dt class="hdlist1">IFFCheck.C </dt>
<dd>
<p>This handy utility program scans an IFF file, checks that the contents are well formed, and prints an outline of the chunks.</p>
</dd>
<dt class="hdlist1">PACKER.H, Packer.C, UnPacker.C </dt>
<dd>
<p>Run encoder and decoder used for ILBM files.</p>
</dd>
<dt class="hdlist1">ILBM.H, ILBMR.C, ILBMW.C </dt>
<dd>
<p>Reader and writer support routines for raster image FORM ILBM.
ILBMR calls IFFR and UnPacker.
ILBMW calls IFFW and Packer.</p>
</dd>
<dt class="hdlist1">ShowILBM.C </dt>
<dd>
<p>Example caller of IFFR and ILBMR modules.
This Commodore-Amiga program reads and displays a FORM ILBM.</p>
</dd>
<dt class="hdlist1">Raw2ILBM.C </dt>
<dd>
<p>Example ILBM writer program.
As a demonstration, it reads a raw raster image file and writes the image as a FORM ILBM file.</p>
</dd>
<dt class="hdlist1">ILBM2Raw.C </dt>
<dd>
<p>Example ILBM reader program.  Reads a FORM ILBM file and writes it into a raw raster image.</p>
</dd>
<dt class="hdlist1">REMALLOC.H, Remalloc.c </dt>
<dd>
<p>Memory allocation routines used in these examples.</p>
</dd>
<dt class="hdlist1">INTUALL.H </dt>
<dd>
<p>generic &#8220;include almost everything&#8221; include-file with the sequence of includes correctly specified.</p>
</dd>
<dt class="hdlist1">READPICT.H, ReadPict.c </dt>
<dd>
<p>given an ILBM file, read it into a bitmap and a color map</p>
</dd>
<dt class="hdlist1">PUTPICT.H, PutPict.c </dt>
<dd>
<p>given a bitmap and a color map, save it as an ILBM file.</p>
</dd>
<dt class="hdlist1">GIO.H, Gio.c </dt>
<dd>
<p>generic I/O speedup package.  Attempts to speed disk I/O by buffering writes and reads.</p>
</dd>
<dt class="hdlist1">giocall.c </dt>
<dd>
<p>sample call to gio.</p>
</dd>
<dt class="hdlist1">ilbmdump.c </dt>
<dd>
<p>reads in ILBM file, prints out ascii representation for including in C files.</p>
</dd>
<dt class="hdlist1">bmprintc.c </dt>
<dd>
<p>prints out a C-language representation of data for a bitmap.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_example_diagrams"><a class="anchor" href="#_example_diagrams"></a>Example Diagrams</h3>
<div class="paragraph">
<p>Here&#8217;s a box diagram for an example IFF file, a raster image FORM ILBM.
This FORM contains a bitmap header property chunk BMHD, a color map property chunk CMAP, and a raster data chunk BODY.
This particular raster is 320 x 200 pixels x 3 bit planes uncompressed.
The <code>0</code> after the CMAP chunk represents a zero pad byte; included since the CMAP chunk has an odd length.
The text to the right of the diagram shows the outline that would be printed by the IFFCheck utility program for this particular file.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="img/EA-IFF-85_2.svg" alt="Box diagram example of an IFF raster image FORM ILBM file" width="600">
</div>
</div>
<div class="paragraph">
<p>This second diagram shows a LIST of two FORMs ILBM sharing a common BMHD property and a common CMAP property.
Again, the text on the right is an outline  a la IFFCheck.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="img/EA-IFF-85_3.svg" alt="Box diagram example of an IFF LIST of two FORMs" width="600">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_b"><a class="anchor" href="#appendix_b"></a>Appendix B: Standards Committee</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following people contributed to the design of this IFF standard:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bob &#8220;Kodiak&#8221; Burns, Commodore-Amiga</p>
</li>
<li>
<p>R. J. Mical, Commodore-Amiga</p>
</li>
<li>
<p>Jerry Morrison, Electronic Arts</p>
</li>
<li>
<p>Greg Riker, Electronic Arts</p>
</li>
<li>
<p>Steve Shaw, Electronic Arts</p>
</li>
<li>
<p>Barry Walsh, Commodore-Amiga</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>This document and its diagrams were ported from plaintext to AsciiDoc by
<a href="https://github.com/tajmone" title="View Tristano Ajmone&#8217;s GitHub profile" target="_blank" rel="noopener">Tristano Ajmone</a>
in March, 2019 for the
<a href="https://github.com/tajmone/pmotion-assets" title="Visit the Cosmigo Pro Motion Assets project on GitHub" target="_blank" rel="noopener">Cosmigo Pro Motion Assets</a>
project.
To the best of my knowledge, this document was released into the public domain.</p>
</div>
<div class="paragraph">
<p>Based on the digital copy of the original document
<a href="http://www.martinreddy.net/gfx/2d/IFF.txt" title="View the upstream 'EA IFF 85' document at MartinReddy.net" target="_blank" rel="noopener">hosted by Martin Reddy</a>.</p>
</div>
<div class="paragraph">
<p>Last edited: 2019-12-31.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>